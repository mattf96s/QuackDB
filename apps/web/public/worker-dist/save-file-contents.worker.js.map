{
  "version": 3,
  "sources": ["../../workers/save-file-contents.worker.ts"],
  "sourcesContent": ["/// <reference lib=\"webworker\" />\n\n// https://github.com/vercel/turborepo/issues/3643#issuecomment-2689349937\nself.onmessage = async (event: MessageEvent) => {\n\tconst { contents, id } = event.data;\n\n\tconsole.log(\"save: \", {\n\t\tcontents,\n\t\tid,\n\t});\n\n\tpostMessage({\n\t\ttype: \"SET_LOADING\",\n\t\tloading: true,\n\t});\n\n\tlet draftHandle: FileSystemFileHandle | undefined;\n\n\ttry {\n\t\tconst directory = await navigator.storage.getDirectory();\n\n\t\tdraftHandle = await directory.getFileHandle(`${id}`, {\n\t\t\tcreate: true,\n\t\t});\n\n\t\tconst syncHandle = await draftHandle.createSyncAccessHandle();\n\n\t\tconst textEncoder = new TextEncoder();\n\n\t\tconst buffer = textEncoder.encode(contents);\n\n\t\tsyncHandle.truncate(0); // clear the file\n\n\t\tsyncHandle.write(buffer, {\n\t\t\tat: 0,\n\t\t});\n\n\t\tsyncHandle.flush();\n\t\tsyncHandle.close();\n\n\t\tpostMessage({\n\t\t\ttype: \"SAVED_FILE_COMPLETE\",\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(`Error saving file: ${id}: `, error);\n\n\t\tpostMessage({\n\t\t\ttype: \"SAVE_ERROR\",\n\t\t\terror: error instanceof Error ? error.message : String(error),\n\t\t});\n\t}\n};\n"],
  "mappings": ";AAGA,KAAK,YAAY,OAAO,UAAwB;AAC/C,QAAM,EAAE,UAAU,GAAG,IAAI,MAAM;AAE/B,UAAQ,IAAI,UAAU;AAAA,IACrB;AAAA,IACA;AAAA,EACD,CAAC;AAED,cAAY;AAAA,IACX,MAAM;AAAA,IACN,SAAS;AAAA,EACV,CAAC;AAED,MAAI;AAEJ,MAAI;AACH,UAAM,YAAY,MAAM,UAAU,QAAQ,aAAa;AAEvD,kBAAc,MAAM,UAAU,cAAc,GAAG,EAAE,IAAI;AAAA,MACpD,QAAQ;AAAA,IACT,CAAC;AAED,UAAM,aAAa,MAAM,YAAY,uBAAuB;AAE5D,UAAM,cAAc,IAAI,YAAY;AAEpC,UAAM,SAAS,YAAY,OAAO,QAAQ;AAE1C,eAAW,SAAS,CAAC;AAErB,eAAW,MAAM,QAAQ;AAAA,MACxB,IAAI;AAAA,IACL,CAAC;AAED,eAAW,MAAM;AACjB,eAAW,MAAM;AAEjB,gBAAY;AAAA,MACX,MAAM;AAAA,IACP,CAAC;AAAA,EACF,SAAS,OAAO;AACf,YAAQ,MAAM,sBAAsB,EAAE,MAAM,KAAK;AAEjD,gBAAY;AAAA,MACX,MAAM;AAAA,MACN,OAAO,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IAC7D,CAAC;AAAA,EACF;AACD;",
  "names": []
}
